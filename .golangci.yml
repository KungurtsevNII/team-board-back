# ========================
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å–∫–∞
# ========================
version: "2"
settings:
  run:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (./...)
    tests: true
    skip-dirs:
      - migrations       # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º SQL
      - config           # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º YAML
    allow-parallel-runners: true

# ========================
# –í–∫–ª—é—á–µ–Ω–Ω—ã–µ –ª–∏–Ω—Ç–µ—Ä—ã
# ========================
  linters:
    enable:
      - govet           # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
      - errcheck        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
      - staticcheck     # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ - –Ω–∞—Ö–æ–¥–∏—Ç –±–∞–≥–∏, —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥
      - gosimple        # –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞
      - ineffassign     # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
      - unused          # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏–º–ø–æ—Ä—Ç—ã, —Ñ—É–Ω–∫—Ü–∏–∏
      - typecheck       # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
      - gofmt           # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      - goimports       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
      - dupl            # –ü–æ–∏—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
      - gocyclo         # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π (if, switch, for, &&, ||)
      - revive          # –ê–Ω–∞–ª–∏–∑ —Å—Ç–∏–ª—è –∫–æ–¥–∞
      - unparam         # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      - prealloc        # –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–ª–∞–π—Å–æ–≤, –≥–¥–µ —ç—Ç–æ –Ω—É–∂–Ω–æ
      - gosec           # –ü–æ–∏—Å–∫ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
      - gocritic        # –°—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª—è
      - bodyclose       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è HTTP body
      - nilerr          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ nil –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
      - errorlint       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
      - misspell        # –û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
      - gocognit        # –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ gocyclo)
      - nilnil          # –ó–∞–ø—Ä–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ (nil, nil)
# ========================
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤
# ========================
  linters-settings:
    gocyclo:
      min-complexity: 15   # –î–æ–ø—É—Å—Ç–∏–º–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
    gocognit:
      min-complexity: 20  # –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
    dupl:
      threshold: 150       # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç–æ–∫–µ–Ω–æ–≤
    revive:
      ignore-generated-header: true
      severity: warning
      rules:
        - name: var-naming
        - name: indent-error-flow
        - name: empty-lines
        - name: unused-parameter
        - name: exported
          severity: warning
        - name: error-strings  # –û—à–∏–±–∫–∏ —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã
        - name: error-return   # error –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
        - name: context-as-argument  # context –ø–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
    goimports:
      local-prefixes: github.com/KungurtsevNII/team-board-back
    govet:
      enable-all: true
      disable:
        - shadow  # –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

    errcheck:
      check-type-assertions: true  # üÜï –ü—Ä–æ–≤–µ—Ä–∫–∞ type assertion
      check-blank: true            # üÜï –ü—Ä–æ–≤–µ—Ä–∫–∞ _ = err

    gosec:
      excludes:
        - G104  # Unhandled errors (–¥—É–±–ª–∏—Ä—É–µ—Ç errcheck)

    staticcheck:
        checks: [ "all" ]

# ========================
# –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
# ========================
  issues:
    exclude-use-default: false
    exclude-rules:
      # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
      - path: _test\.go
        linters:
          - lll
          - dupl
    max-issues-per-linter: 0
    max-same-issues: 0

# ========================
# –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
# ========================
  output:
    formats:
      - format: colored-line-number
        path: stdout
    print-issued-lines: true
    print-linter-name: true
    uniq-by-line: true
    sort-results: true
